<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador de Códigos QR</title>
    <style>
        /* Estilo para el marco blanco sólido de 1 píxel */
        #qrcode {
            border: 1px solid white;
            display: inline-block;
        }
    </style>
    <script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js"></script>
</head>
<body>
    <input type="text" id="text-input" placeholder="Texto para el código QR">
    <button id="generate-button">Generar Código QR</button>
    <button id="download-button" style="display: none;">Descargar Código QR</button>
    <div id="qrcode"></div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const generateButton = document.getElementById("generate-button");
            const downloadButton = document.getElementById("download-button");
            const textInput = document.getElementById("text-input");
            const qrcodeDiv = document.getElementById("qrcode");

            generateButton.addEventListener("click", function() {
                const text = textInput.value;

                if (text.trim() !== "") {
                    qrcodeDiv.innerHTML = "";
                    const qrcode = new QRCode(qrcodeDiv, {
                        text: text,
                        width: 128,
                        height: 128
                    });

                    // Mostrar el botón de descarga
                    downloadButton.style.display = "block";
                } else {
                    alert("Por favor ingrese un texto para generar el código QR.");
                }
            });

            downloadButton.addEventListener("click", function() {
                const qrImage = qrcodeDiv.querySelector("img");
                if (qrImage) {
                    const fileName = prompt("Ingrese un nombre para el archivo (sin extensión):");
                    if (fileName) {
                        const link = document.createElement("a");
                        link.href = qrImage.src;
                        link.download = `${fileName}.png`;
                        link.click();
                    } else {
                        alert("Debe ingresar un nombre de archivo válido.");
                    }
                }
            });
        });
    </script>
</body>
</html>
